## This is a sample configuration file. See the nxlog reference manual about the
## configuration options. It should be installed locally and is also available
## online at http://nxlog.org/nxlog-docs/en/nxlog-reference-manual.html

## Please set the ROOT to the folder your nxlog was installed into,
## otherwise it will not start.

#define ROOT C:\Program Files\nxlog
define ROOT C:\Program Files (x86)\nxlog
define DATA_DRIVE D:

Moduledir %ROOT%\modules
CacheDir %DATA_DRIVE%\nxlog_data
Pidfile %DATA_DRIVE%\nxlog_data\nxlog.pid
SpoolDir %DATA_DRIVE%\nxlog_data
LogFile %DATA_DRIVE%\nxlog_data\nxlog.log

<Input apache_access>
 Module im_file
 File 'c:\Apache\logs\access.log'
 SavePos TRUE
 ReadFromLast TRUE
 PollInterval 1
 Exec $Message = $raw_event; $SyslogFacilityValue = 22;
</Input>

<Input apache_error>
 Module im_file
 File 'c:\Apache\logs\error.log'
 SavePos TRUE
 ReadFromLast TRUE
 PollInterval 1
 Exec $Message = $raw_event; $SyslogFacilityValue = 22;
</Input>

<Input mysql_log>
 Module im_file
 File 'd:\MySQLData\t3.log'
 SavePos TRUE
 ReadFromLast TRUE
 PollInterval 1
 Exec $Message = $raw_event; $SyslogFacilityValue = 22;
</Input>

<Input mysql_err_log>
 Module im_file
 File 'd:\MySQLData\t3.err'
 SavePos TRUE
 ReadFromLast TRUE
 PollInterval 1
 Exec $Message = $raw_event; $SyslogFacilityValue = 22;
</Input>

<Input msevent>
 Module im_mseventlog
 UTF8 TRUE
 Exec if $FileName == "System" $SyslogFacilityValue = syslog_facility_value("daemon");
 Exec if $FileName == "Application" $SyslogFacilityValue = syslog_facility_value("user");
 Exec if $FileName == "Security" $SyslogFacilityValue = syslog_facility_value("auth");
</Input>

<Processor syslogizer>
 Module pm_transformer
 OutputFormat syslog_rfc3164
</Processor>

<Output rsyslog>
 OutputType  LineBased
 Module om_tcp
 Host docker.streambox.com
 Port 514
</Output>

<Route 1>
 Path msevent, apache_access, apache_error, mysql_log, mysql_err_log => syslogizer => rsyslog
</Route>
